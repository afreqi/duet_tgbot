# ===== –ë–∞–∑–æ–≤—ã–π –æ–±—Ä–∞–∑ Python =====
FROM python:3.11-slim

# ===== –†–∞–±–æ—á–∞—è –¥–∏—Ä–µ–∫—Ç–æ—Ä–∏—è =====
WORKDIR /app

# ===== –ö–æ–ø–∏—Ä—É–µ–º –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏ =====
COPY requirements.txt .

# ===== –£—Å—Ç–∞–Ω–∞–≤–ª–∏–≤–∞–µ–º –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏ =====
RUN pip install --no-cache-dir -r requirements.txt

# ===== –ö–æ–ø–∏—Ä—É–µ–º –≤–µ—Å—å –ø—Ä–æ–µ–∫—Ç =====
COPY . .

# ===== –ê–≤—Ç–æ–ø–µ—Ä–µ–∑–∞–ø—É—Å–∫ –ø—Ä–∏ –ø–∞–¥–µ–Ω–∏–∏ =====
CMD while true; do \
    echo "[`date '+%d.%m.%Y %H:%M:%S'`] üöÄ –ó–∞–ø—É—Å–∫ –±–æ—Ç–∞..."; \
    python bot.py || echo "[`date '+%d.%m.%Y %H:%M:%S'`] ‚ö†Ô∏è –ë–æ—Ç —É–ø–∞–ª, –ø–µ—Ä–µ–∑–∞–ø—É—Å–∫ —á–µ—Ä–µ–∑ 5 —Å–µ–∫—É–Ω–¥..."; \
    sleep 5; \
done
